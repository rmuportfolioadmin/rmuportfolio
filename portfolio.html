<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Manager, RMU</title>
    <meta name="description" content="Professional medical portfolio of Abdul Haseeb Ahmad, MBBS student specializing in internal medicine and cardiology.">
    <link rel="icon" type="image/png" href="RMUlogo.png" />
    <link rel="shortcut icon" href="RMUlogo.png" type="image/png" />
    <meta name="referrer" content="no-referrer" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' https://apis.google.com https://accounts.google.com https://cdnjs.cloudflare.com 'unsafe-inline'; style-src 'self' https://fonts.googleapis.com 'unsafe-inline'; img-src 'self' data: blob:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://script.google.com https://script.googleusercontent.com https://apis.google.com https://accounts.google.com https://www.googleapis.com https://oauth2.googleapis.com https://*.run.app; frame-src https://accounts.google.com; base-uri 'self'; form-action 'self'; upgrade-insecure-requests" />
        <!-- Cache hard disable (defensive; dynamic query params already used) -->
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />
    <link rel="stylesheet" href="portfolio.css?v=20250930.1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
        <style>
            /* Respect user motion preference: disable non-critical animations */
            @media (prefers-reduced-motion: reduce) {
                *, *::before, *::after { animation: none !important; transition: none !important; }
            }
        </style>
        <script src="https://apis.google.com/js/api.js"></script>
        <script src="https://accounts.google.com/gsi/client" async defer></script>
        <script>
    console.log("Google API script tag loaded!");
</script>
        <script src="config.js"></script>
        <script>
        // Early UX polish: if redirected from index with a session token, hide the authorize button instantly to prevent flicker.
        (function(){
            try{
                var tok = sessionStorage.getItem('userToken');
                if(tok){
                    var st = document.createElement('style');
                    st.textContent = '#authorize_button{display:none!important;}';
                    document.head.appendChild(st);
                }
            }catch(e){}
        })();
        </script>
</head>
<body class="theme-rmu loading-initial">
    <!-- Back to Gallery Button (added) -->
    <a href="index.html" onclick="try{localStorage.clear();sessionStorage.clear();}catch(e){}if(history.length>1){history.back();return false;}" style="position:fixed;left:10px;top:10px;z-index:10000;background:linear-gradient(90deg,#0a66c2,#2b79ff);color:#fff;padding:8px 14px;border-radius:24px;font-size:13px;font-weight:600;text-decoration:none;box-shadow:0 4px 12px -2px rgba(10,70,150,.35);display:inline-flex;align-items:center;gap:6px;">
        <span style="display:inline-block;transform:translateY(1px);">&#8592;</span> Gallery
    </a>
    <script>
    // Admin postMessage handler: accept portfolio data from index admin opener and acknowledge
    (function(){
        function handleAdminMessage(event){
            try{
                const d = event && event.data;
                if(!d || d.type !== 'admin-portfolio-data') return;
                // acknowledge receipt to parent window
                try{ if(event.source && event.source !== window){ event.source.postMessage({ type:'admin-data-received', success:true }, '*'); } }catch(_){}
                // adopt data into the app using the same preloaded flow
                try{
                    window.__PRELOADED_PORTFOLIO_DATA = d.data;
                    window.__ADOPTED_SPECIFIC_PORTFOLIO = true;
                    try{ localStorage.setItem('__lastPortfolioFile','admin-remote'); }catch(_){}
                    window.dispatchEvent(new CustomEvent('portfolio_data_ready'));
                    const pre = document.getElementById('preload-status'); if(pre){ pre.textContent='Admin data received'; }
                }catch(err){ console.warn('[admin-message] Failed to adopt admin data', err); }
            }catch(_){/* ignore */}
        }
        window.addEventListener('message', handleAdminMessage);
    })();
    </script>
    <script>
    // Query param portfolio JSON loader shim (enhanced for reliability & VC remote mode).
    // Supports:
    //   ?file=localPath.json       -> loads local static JSON
    //   ?driveFile=REMOTE_ID.json  -> loads via backend (__REMOTE_PORTFOLIO_BASE)
    // The remote base is set in index.html bootstrap when vcMode detected.
    (function(){
        function getParam(name){
            try { return new URLSearchParams(location.search).get(name); } catch(e){ return null; }
        }
    const driveFile = getParam('driveFile');
    const file = getParam('file');
        if(driveFile){
            console.log('[portfolio-loader] driveFile mode param:', driveFile);
        } else {
            console.log('[portfolio-loader] Query param file:', file);
        }
        
        if(!file && !driveFile) {
            console.log('[portfolio-loader] No ?file= or ?driveFile= parameter found, using default behavior');
            return; // fallback to existing auto loader behavior
        }
        
        // AGGRESSIVE CACHE CLEARING - Ensure no previous portfolio data remains
        try {
            localStorage.clear();
            sessionStorage.clear();
            delete window.__PRELOADED_PORTFOLIO_DATA;
            delete window.app;
            console.log('[portfolio-loader] ✓ Cleared all cache and previous data');
        } catch(e) { console.warn('[portfolio-loader] Cache clearing error:', e); }
        
        // Mark that we're loading a specific file to prevent repo override
    window.__LOADING_SPECIFIC_FILE = true;
    window.__CURRENT_PORTFOLIO_FILE = driveFile || file;
        
                // Show blocking centered loading indicator & hide content until adoption
                const pre = document.createElement('div');
                pre.id = 'preload-status';
                pre.textContent = `Loading ${(driveFile||file).replace('data/', '')}...`;
                pre.style.cssText = 'position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;padding:18px 30px;border:1px solid #c9d4e2;border-radius:18px;font:600 14px Inter,system-ui,sans-serif;z-index:10001;box-shadow:0 8px 32px -8px rgba(0,0,0,.25);letter-spacing:.5px;';
                document.addEventListener('DOMContentLoaded',()=>{
                    document.body.appendChild(pre);
                    document.querySelectorAll('.section').forEach(s=>{ s.style.visibility='hidden'; });
                });
        
        // Fetch the specific portfolio file with aggressive cache-busting
        const cacheBuster = Date.now();
        let fileUrl;
        let remoteMode = false;
        if(driveFile){
            if(window.__REMOTE_PORTFOLIO_BASE){
                const sep = window.__REMOTE_PORTFOLIO_BASE.includes('?') ? '&' : '';
                fileUrl = window.__REMOTE_PORTFOLIO_BASE + encodeURIComponent(driveFile) + '&cb=' + cacheBuster;
                remoteMode = true;
            } else {
                // Fall back to configured BACKEND_BASE if available
                const cfg = (window.RMU_CONFIG||{});
                const base = (cfg.BACKEND_BASE||'').replace(/\/$/, '');
                if(base){
                    fileUrl = base + '/api/download?id=' + encodeURIComponent(driveFile) + '&cb=' + cacheBuster;
                    remoteMode = true;
                } else {
                    console.warn('[portfolio-loader] driveFile provided but no remote base configured');
                    fileUrl = driveFile + (driveFile.includes('?')?'&':'?') + 'cb=' + cacheBuster; // last-resort attempt
                }
            }
        } else {
            fileUrl = file.includes('?') ? `${file}&cb=${cacheBuster}` : `${file}?cb=${cacheBuster}`;
        }
        (function fetchWithRetry(url, attempt=1){
            fetch(url, {
                cache:'no-store',
                headers: {
                    'Cache-Control': 'no-cache, no-store, must-revalidate',
                    'Pragma': 'no-cache',
                    'Expires': '0'
                }
            })
            .then(r=>{ 
                console.log('[portfolio-loader] Fetch response:', r.status, r.ok, 'attempt', attempt);
                if(!r.ok) throw new Error(`HTTP ${r.status}: ${r.statusText}`);
                return r.json();
            })
            .then(data => { 
                console.log('[portfolio-loader] Successfully loaded data from:', driveFile || file, remoteMode?'(remote)':'');
                console.log('[portfolio-loader] Data preview:', {
                    achievements: data.achievements?.length || 0,
                    reflections: data.reflections?.length || 0,
                    name: data.name || data.title || 'No name'
                });
                window.__PRELOADED_PORTFOLIO_DATA = data;
                window.dispatchEvent(new CustomEvent('portfolio_data_ready'));
                pre.textContent = 'Portfolio loaded successfully';
                // don't remove until adoption done; adoption will remove
            })
            .catch(err => { 
                console.error('[portfolio-loader] Failed to load portfolio file attempt', attempt, err, 'url=', url);
                if (attempt < 3) {
                    const delay = 300 * attempt;
                    pre.textContent = `Retrying (${attempt})...`;
                    if(driveFile){
                        let retryUrl;
                        if(window.__REMOTE_PORTFOLIO_BASE){
                            retryUrl = window.__REMOTE_PORTFOLIO_BASE + encodeURIComponent(driveFile) + '&cb=' + Date.now();
                        } else {
                            const cfg = (window.RMU_CONFIG||{}); const base = (cfg.BACKEND_BASE||'').replace(/\/$/, '');
                            retryUrl = base ? (base + '/api/download?id=' + encodeURIComponent(driveFile) + '&cb=' + Date.now()) : (driveFile + (driveFile.includes('?')?'&':'?') + 'cb=' + Date.now());
                        }
                        setTimeout(()=>fetchWithRetry(retryUrl, attempt+1), delay);
                    } else {
                        setTimeout(()=>fetchWithRetry(file.includes('?')? `${file}&cb=${Date.now()}` : `${file}?cb=${Date.now()}`, attempt+1), delay);
                    }
                } else {
                    pre.textContent = `Failed to load ${(driveFile||file).replace('data/','')}`;
                    pre.style.background = '#ffe6e6';
                    // Offer manual retry button
                    const btn = document.createElement('button');
                    btn.textContent = 'Retry';
                    btn.style.cssText='margin-left:12px;padding:4px 10px;font-size:12px;border:1px solid #c33;background:#b22222;color:#fff;border-radius:6px;cursor:pointer;';
                                        btn.onclick=()=>{ btn.disabled=true; pre.textContent='Retrying...';
                                            if(driveFile){
                                                let retryUrl;
                                                if(window.__REMOTE_PORTFOLIO_BASE){
                                                    retryUrl = window.__REMOTE_PORTFOLIO_BASE + encodeURIComponent(driveFile) + '&cb=' + Date.now();
                                                } else {
                                                    const cfg = (window.RMU_CONFIG||{}); const base = (cfg.BACKEND_BASE||'').replace(/\/$/, '');
                                                    retryUrl = base ? (base + '/api/download?id=' + encodeURIComponent(driveFile) + '&cb=' + Date.now()) : (driveFile + (driveFile.includes('?')?'&':'?') + 'cb=' + Date.now());
                                                }
                                                fetchWithRetry(retryUrl,1);
                                            } else {
                                                fetchWithRetry(file.includes('?')? `${file}&cb=${Date.now()}` : `${file}?cb=${Date.now()}`,1);
                                            }
                    };
                    pre.appendChild(btn);
                }
            });
        })(fileUrl,1);
        
        // Enhanced adoption function with better error handling
        window.__ADOPT_PRELOADED = function(appInstance){
            try {
                console.log('[portfolio-loader] Attempting to adopt preloaded data...');
                
                if(!window.__PRELOADED_PORTFOLIO_DATA){
                    console.warn('[portfolio-loader] No preloaded data available to adopt');
                    return false;
                }
                
                if(!appInstance || typeof appInstance.normalizeLoadedData !== 'function'){
                    console.warn('[portfolio-loader] App instance not ready for data adoption');
                    return false;
                }
                
                const norm = appInstance.normalizeLoadedData(window.__PRELOADED_PORTFOLIO_DATA);
                console.log('[portfolio-loader] Normalized data:', {
                    achievements: norm.achievements?.length || 0,
                    reflections: norm.reflections?.length || 0
                });
                
                // FORCE CLEAR any existing data first (critical for template-based portfolios)
                appInstance.achievements = [];
                appInstance.reflections = [];
                
                // Apply ONLY the new data from the specific JSON file
                appInstance.achievements = norm.achievements || [];
                appInstance.reflections = norm.reflections || [];
                
                // Handle personal info and profile photo specifically for template-based files
                if(norm.personalInfo){
                    try { 
                        // Clear previous personal info completely
                        localStorage.removeItem('personalInfo');
                        localStorage.setItem('personalInfo', JSON.stringify(norm.personalInfo));
                        console.log('[portfolio-loader] ✓ Set personal info for:', window.__CURRENT_PORTFOLIO_FILE);
                    } catch(e){
                        console.warn('[portfolio-loader] Failed to save personal info:', e);
                    }
                }
                
                // Clear and reload profile photo to prevent template contamination
                if(norm.profilePhoto) {
                    localStorage.removeItem('profilePhoto');
                    localStorage.setItem('profilePhoto', norm.profilePhoto);
                } else {
                    localStorage.removeItem('profilePhoto');
                }
                
                // Force UI refresh with new data & reveal
                if(typeof appInstance.loadPersonalInfo === 'function') appInstance.loadPersonalInfo();
                if(typeof appInstance.renderAchievements === 'function') appInstance.renderAchievements();
                if(typeof appInstance.renderReflections === 'function') appInstance.renderReflections();
                if(typeof appInstance.updateLinkedAchievements === 'function') appInstance.updateLinkedAchievements();
                document.querySelectorAll('.section').forEach(s=>{ s.style.visibility='visible'; });
                document.body.classList.remove('loading-initial');
                // Remove loader panel now
                const preEl = document.getElementById('preload-status'); if (preEl) preEl.remove();
                
                console.log('[portfolio-loader] ✓ Successfully adopted preloaded JSON from ?file=', file);
                // Mark global flag so repo auto-loader will not override this data
                window.__ADOPTED_SPECIFIC_PORTFOLIO = true;
                // Persist sentinel so BFCache restores can detect mismatch and re-fetch
                try { localStorage.setItem('__lastPortfolioFile', driveFile || file); } catch(_){}
                // In case constructor deferred rendering, ensure immediate UI update (already done above)
                document.querySelectorAll('.section').forEach(s=>{ s.style.visibility='visible'; });
                document.body.classList.remove('loading-initial');
                const preEl2 = document.getElementById('preload-status'); if (preEl2) preEl2.remove();
                return true;
                
            } catch(e){ 
                console.error('[portfolio-loader] Adoption error:', e);
                return false;
            }
        };

                // Adoption retry logic when data becomes ready but app not yet constructed
                let adoptionAttempts = 0;
                function tryAdoptLoop(){
                    if (window.app && typeof window.__ADOPT_PRELOADED==='function' && window.__PRELOADED_PORTFOLIO_DATA){
                        const ok = window.__ADOPT_PRELOADED(window.app);
                        if (ok) { console.log('[portfolio-loader] Adoption loop success'); return; }
                    }
                    if (adoptionAttempts < 40) { // ~6s (40*150ms)
                        adoptionAttempts++; setTimeout(tryAdoptLoop,150);
                    } else {
                        console.warn('[portfolio-loader] Adoption timed out. Showing retry control.');
                        const preEl = document.getElementById('preload-status');
                        if (preEl) {
                            preEl.textContent='Data loaded but adoption pending...';
                            const r=document.createElement('button');
                            r.textContent='Force Adopt';
                            r.style.cssText='margin-left:10px;padding:4px 10px;font-size:12px;border:1px solid #0a66c2;background:#0a66c2;color:#fff;border-radius:6px;cursor:pointer;';
                            r.onclick=()=>{ adoptionAttempts=0; preEl.textContent='Retrying adoption...'; tryAdoptLoop(); };
                            preEl.appendChild(r);
                        }
                    }
                }
                window.addEventListener('portfolio_data_ready', ()=>{ console.log('[portfolio-loader] portfolio_data_ready event'); tryAdoptLoop(); });

                // BFCache / back-forward navigation handling:
        // If user visits file A, then file B (which clears storage), then navigates back to A (BFCache restore),
        // the DOM shows A but localStorage reflects B. Detect and force a re-fetch so A's real data returns instantly.
        window.addEventListener('pageshow', function(e){
                        if(!file && !driveFile) return;
            let stored = null;
            try { stored = localStorage.getItem('__lastPortfolioFile'); } catch(_){ }
                        const currentKey = driveFile || file;
                        const mismatch = (stored && stored !== currentKey);
            if (e.persisted || mismatch) {
                                console.log('[portfolio-loader] pageshow detected', { persisted:e.persisted, stored, expected:currentKey, mismatch });
                // Re-fetch with fresh cache buster and re-adopt
                                let refetchUrl;
                                                if(driveFile){
                                                    if(window.__REMOTE_PORTFOLIO_BASE){
                                                        refetchUrl = window.__REMOTE_PORTFOLIO_BASE + encodeURIComponent(driveFile) + '&bf=' + Date.now();
                                                    } else {
                                                        const cfg = (window.RMU_CONFIG||{}); const base = (cfg.BACKEND_BASE||'').replace(/\/$/, '');
                                                        refetchUrl = base ? (base + '/api/download?id=' + encodeURIComponent(driveFile) + '&bf=' + Date.now()) : (driveFile + (driveFile.includes('?')?'&':'?') + 'bf=' + Date.now());
                                                    }
                                } else {
                                    refetchUrl = file.includes('?') ? `${file}&bf=${Date.now()}` : `${file}?bf=${Date.now()}`;
                                }
                fetch(refetchUrl, { cache:'no-store', headers:{'Cache-Control':'no-cache, no-store, must-revalidate','Pragma':'no-cache','Expires':'0'} })
                  .then(r=>{ if(!r.ok) throw new Error('HTTP '+r.status); return r.json(); })
                  .then(data => {
                      console.log('[portfolio-loader] BFCache/mismatch refetch success');
                      window.__PRELOADED_PORTFOLIO_DATA = data;
                      if (window.app && typeof window.__ADOPT_PRELOADED === 'function') {
                          window.__ADOPT_PRELOADED(window.app);
                      }
                  })
                  .catch(err=>console.warn('[portfolio-loader] BFCache refetch failed', err));
            }
        });
    })();
    </script>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <h1>Rawalpindi Medical University</h1>
                <p>Abdul Haseeb Ahmad</p>
                <!-- Build/version stamp to help confirm deployed changes -->
                <div id="build-version" style="font-size:12px;color:var(--muted-foreground);margin-top:4px;">v2025.09.25-1</div>
            </div>
            <nav class="nav-menu">
                <button class="nav-item active" data-section="personal">Personal Info</button>
                <button class="nav-item" data-section="descriptive">Descriptive Portfolio</button>
                <button class="nav-item" data-section="reflective">Reflective Portfolio</button>
                <button id="export-pdf" class="nav-item" title="Export visible portfolio to PDF">Export to PDF</button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <div id="initial-status" style="position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);font:600 16px Inter,system-ui,sans-serif;color:#444;background:#fff;padding:18px 26px;border:1px solid #d0d7df;border-radius:14px;box-shadow:0 6px 28px -10px rgba(0,0,0,.15);z-index:9998;display:none;">
            Loading portfolio data...
        </div>
        <!-- Personal Information Section -->
        <section id="personal" class="section active">
            <div class="container">
                <div class="rmu-portfolio-container">
                    <!-- Modern 3-Column Layout -->
                    <div class="rmu-modern-layout">
                        <!-- Edit Controls -->
                        <div class="rmu-edit-controls">
                            <button class="rmu-edit-button" id="edit-personal">Edit</button>
                            <button id="save-personal" class="rmu-save-button" style="display:none;">Save</button>
                            <button id="cancel-personal" class="rmu-cancel-button" style="display:none;">Cancel</button>
                        </div>
                        
                        <!-- Main Content Area (Left 2 Columns) -->
                        <div class="rmu-content-area">
                            <!-- Header Section with Logo and Title -->
                            <div class="rmu-header-modern">
                                <div class="rmu-logo-section">
                                    <img src="RMUlogo.png" alt="RMU Logo" class="rmu-logo-modern">
                                    <div class="rmu-title-modern">
                                        <div class="rmu-editable-field rmu-portfolio-title" data-field="title">
                                            <span id="title-display">Abdul Haseeb's Medfolio</span>
                                            <input type="text" id="title" value="Abdul Haseeb's Medfolio" style="display:none;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Personal Information Fields (2 Columns) -->
                            <div class="rmu-fields-container">
                                <!-- Left Column -->
                                <div class="rmu-field-column">
                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Student Name</label>
                                        <div class="rmu-editable-field rmu-student-name" data-field="studentName">
                                            <span id="firstName-display">Abdul Haseeb Ahmad</span>
                                            <input type="text" id="firstName" value="Abdul Haseeb Ahmad" style="display:none;">
                                        </div>
                                    </div>

                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Roll No</label>
                                        <div class="rmu-editable-field rmu-detail-text" data-field="rollNo">
                                            <span id="rollNo-display">123</span>
                                            <input type="text" id="rollNo" value="123" style="display:none;">
                                        </div>
                                    </div>

                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Registration No</label>
                                        <div class="rmu-editable-field rmu-small-detail-text" data-field="registrationNo">
                                            <span id="registrationNo-display">RMU-MBBS-2024-001</span>
                                            <input type="text" id="registrationNo" value="RMU-MBBS-2024-001" style="display:none;">
                                        </div>
                                    </div>

                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Program Enrolled</label>
                                        <div class="rmu-editable-field rmu-small-detail-text" data-field="programEnrolled">
                                            <span id="programEnrolled-display">MBBS</span>
                                            <input type="text" id="programEnrolled" value="MBBS" style="display:none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Right Column -->
                                <div class="rmu-field-column">
                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Father's Name</label>
                                        <div class="rmu-editable-field rmu-student-name" data-field="fatherName">
                                            <span id="fatherName-display">Muhammad Athar</span>
                                            <input type="text" id="fatherName" value="Muhammad Athar" style="display:none;">
                                        </div>
                                    </div>

                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Email</label>
                                        <div class="rmu-editable-field rmu-small-detail-text" data-field="email">
                                            <span id="email-display">abdul.haseeb@student.rmu.edu.pk</span>
                                            <input type="email" id="email" value="abdul.haseeb@student.rmu.edu.pk" style="display:none;">
                                        </div>
                                    </div>

                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Mobile No</label>
                                        <div class="rmu-editable-field rmu-small-detail-text" data-field="mobileNo">
                                            <span id="phone-display">+92 300 1234567</span>
                                            <input type="tel" id="phone" value="+92 300 1234567" style="display:none;">
                                        </div>
                                    </div>
                                    
                                    <div class="rmu-field">
                                        <label class="rmu-field-label">Session</label>
                                        <div class="rmu-editable-field rmu-small-detail-text" data-field="session">
                                            <span id="session-display">2024-25</span>
                                            <input type="text" id="session" value="2024-25" style="display:none;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Professional Bio Section (Full Width) -->
                            <div class="rmu-bio-section-modern">
                                <h3 class="rmu-bio-title">Professional Bio</h3>
                                <div class="rmu-editable-field rmu-bio-content" data-field="professionalBio">
                                    <span id="bio-display">Passionate medical student dedicated 1. To impart evidence based research oriented medical education. 2. To provide best possible patient care. 3. To inculcate the values of mutual respect and ethical practice of medicine.</span>
                                    <textarea id="bio" rows="4" style="display:none;">Passionate medical student dedicated 1. To impart evidence based research oriented medical education. 2. To provide best possible patient care. 3. To inculcate the values of mutual respect and ethical practice of medicine.</textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Profile Picture Column (Right) -->
                        <div class="rmu-profile-column">
                            <div class="rmu-profile-picture-modern">
                                <img src="profile.png" alt="Profile" class="rmu-profile-img-modern">
                                <input type="file" id="profile-photo-input" accept="image/*" style="display:none;" />
                                <button id="change-photo" class="rmu-change-photo-btn-modern" style="display:none;">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                                        <circle cx="12" cy="13" r="4"/>
                                    </svg>
                                    Change Photo
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="rmu-footer"></div>
                </div>
            </div>
        </section>

        <!-- Descriptive Portfolio Section -->
        <section id="descriptive" class="section">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2>Descriptive Portfolio</h2>
                        <p>Academic achievements, clinical experiences, and professional development</p>
                    </div>
                    <div class="section-actions">
                        <div class="search-container">
                            <input type="text" id="search-descriptive" placeholder="Search achievements..." class="search-input">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="11" cy="11" r="8"/>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            </svg>
                        </div>
                        <!-- Category bar: full-width pill bar with dividers. On mobile, show a compact UI: one 'All' pill + a dropdown to pick other categories -->
                        <div id="descriptive-categories" class="category-bar-wrapper">
                            <button class="descriptive-category active" data-category="" aria-pressed="true">
                                <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/></svg>
                                <span>All</span>
                            </button>
                            <button class="descriptive-category" data-category="academic">
                                <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M12 2l9 4-9 4-9-4 9-4z"/><path d="M3 10v4a9 9 0 0 0 18 0v-4"/></svg>
                                <span>Academics</span>
                            </button>
                            <button class="descriptive-category" data-category="clinical">
                                <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M20 8v6a6 6 0 0 1-12 0V8"/><path d="M16 6a4 4 0 1 0-8 0v2"/><path d="M12 14v6"/></svg>
                                <span>Clinical</span>
                            </button>
                            <button class="descriptive-category" data-category="extracurricular">
                                <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M17 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                                <span>Extracurricular</span>
                            </button>
                            <button class="descriptive-category" data-category="research">
                                <svg class="category-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true"><path d="M6 3h12l-2 7a6 6 0 0 1-8 0L6 3z"/><path d="M8 14h8"/></svg>
                                <span>Research</span>
                            </button>
                            <!-- Mobile-only select: hidden on desktop, visible on small screens -->
                            <select id="mobile-descriptive-select" class="mobile-descriptive-select" aria-label="Choose category (mobile)">
                                <option value="">All</option>
                                <option value="academic">Academics</option>
                                <option value="clinical">Clinical</option>
                                <option value="extracurricular">Extracurricular</option>
                                <option value="research">Research</option>
                            </select>
                        </div>
                        <button id="add-achievement" class="btn btn-primary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Add Achievement
                        </button>
                    </div>
                </div>

                <div class="achievements-grid" id="achievements-container">
                    <!-- Achievements will be populated by JavaScript -->
                </div>
                <!-- Category summary cards (4 equal rectangles) -->
                <div id="category-cards" class="category-cards" aria-hidden="false">
                    <div class="cat-card" data-key="academic">
                        <div class="cat-icon" aria-hidden="true">
                            <!-- nicer school / graduation cap icon -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L1 7l11 5 9-4.09V17a2 2 0 0 1-2 2h-2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 22v-9" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </div>
                        <div class="cat-count">0</div>
                        <div class="cat-label">Academics</div>
                    </div>
                    <div class="cat-card" data-key="clinical">
                        <div class="cat-icon" aria-hidden="true">
                            <!-- nicer stethoscope icon -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M20 8v6a6 6 0 0 1-12 0V8" stroke-linecap="round" stroke-linejoin="round"/><path d="M7 8V5a2 2 0 0 1 2-2h6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </div>
                        <div class="cat-count">0</div>
                        <div class="cat-label">Clinical</div>
                    </div>
                    <div class="cat-card" data-key="extracurricular">
                        <div class="cat-icon" aria-hidden="true">
                            <!-- people / activities icon -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M17 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="7" r="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </div>
                        <div class="cat-count">0</div>
                        <div class="cat-label">Extracurricular</div>
                    </div>
                    <div class="cat-card" data-key="research">
                        <div class="cat-icon" aria-hidden="true">
                            <!-- microscope / research icon -->
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M6 3h12l-2 7a6 6 0 0 1-8 0L6 3z" stroke-linecap="round" stroke-linejoin="round"/><path d="M9 14h6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </div>
                        <div class="cat-count">0</div>
                        <div class="cat-label">Research</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reflective Portfolio Section -->
        <section id="reflective" class="section">
            <div class="container">
                <div class="section-header">
                    <div>
                        <h2>Reflective Portfolio</h2>
                        <p>Personal reflections, learning experiences, and professional growth</p>
                    </div>
                    <div class="section-actions">
                        <div class="search-container">
                            <input type="text" id="search-reflective" placeholder="Search reflections..." class="search-input">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="11" cy="11" r="8"/>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            </svg>
                        </div>
                        <select id="filter-reflective" class="filter-select">
                            <option value="">All Moods</option>
                            <option value="positive">Positive</option>
                            <option value="challenging">Challenging</option>
                            <option value="neutral">Neutral</option>
                        </select>
                        <button id="add-reflection" class="btn btn-primary">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <line x1="12" y1="5" x2="12" y2="19"/>
                                <line x1="5" y1="12" x2="19" y2="12"/>
                            </svg>
                            Add Reflection
                        </button>
                    </div>
                </div>

                <div class="reflections-container" id="reflections-container">
                    <!-- Reflections will be populated by JavaScript -->
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <div id="achievement-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="achievement-modal-title">Add Achievement</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="achievement-form">
                    <div class="form-group">
                        <label for="achievement-title">Title</label>
                        <input type="text" id="achievement-title" required>
                    </div>
                    <div class="form-group">
                        <label for="achievement-category">Category</label>
                            <select id="achievement-category" required>
                            <option value="">Select Category</option>
                            <option value="academic">Academics</option>
                            <option value="clinical">Clinical</option>
                            <option value="extracurricular">Extracurricular</option>
                            <option value="research">Research</option>
                            <option value="certification">Certification</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="achievement-date">Date</label>
                        <input type="date" id="achievement-date" required>
                    </div>
                    <div class="form-group">
                        <label for="achievement-description">Description</label>
                        <textarea id="achievement-description" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="achievement-image">Images (optional, you may select multiple)</label>
                        <input type="file" id="achievement-image" accept="image/*" multiple>
                    </div>
                    <div class="form-group">
                        <label for="achievement-ppt">PowerPoint (PPT, optional)</label>
                        <input type="file" id="achievement-ppt" accept=".ppt,.pptx,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation">
                    </div>
                    <div class="form-group">
                        <label for="achievement-pdf">PDF (optional)</label>
                        <input type="file" id="achievement-pdf" accept="application/pdf">
                    </div>
                    <div class="form-group">
                        <label for="achievement-status">Status</label>
                        <select id="achievement-status" required>
                            <option value="completed">Completed</option>
                            <option value="in-progress">In Progress</option>
                            <option value="planned">Planned</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline modal-cancel">Cancel</button>
                <button type="submit" form="achievement-form" class="btn btn-primary">Save Achievement</button>
            </div>
        </div>
    </div>

    <div id="reflection-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="reflection-modal-title">Add Reflection</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="reflection-form">
                    <div class="form-group">
                        <label for="reflection-title">Title</label>
                        <input type="text" id="reflection-title" required>
                    </div>
                    <div class="form-group">
                        <label for="reflection-date">Date</label>
                        <input type="date" id="reflection-date" required>
                    </div>
                    <div class="form-group">
                        <label for="reflection-mood">Mood</label>
                        <select id="reflection-mood" required>
                            <option value="">Select Mood</option>
                            <option value="positive">Positive</option>
                            <option value="challenging">Challenging</option>
                            <option value="neutral">Neutral</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reflection-content">Reflection Content</label>
                        <textarea id="reflection-content" rows="8" placeholder="Write your thoughts and reflections..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="reflection-image">Images (optional, you may select multiple)</label>
                        <input type="file" id="reflection-image" accept="image/*" multiple>
                    </div>
                    <div class="form-group">
                        <label for="reflection-ppt">PowerPoint (PPT, optional)</label>
                        <input type="file" id="reflection-ppt" accept=".ppt,.pptx,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation">
                    </div>
                    <div class="form-group">
                        <label for="reflection-pdf">PDF (optional)</label>
                        <input type="file" id="reflection-pdf" accept="application/pdf">
                    </div>
                    <div class="form-group">
                        <label for="reflection-linked">Link to Achievement</label>
                        <select id="reflection-linked">
                            <option value="">No linked achievement</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline modal-cancel">Cancel</button>
                <button type="submit" form="reflection-form" class="btn btn-primary">Save Reflection</button>
            </div>
        </div>
    </div>

    <!-- html2canvas and jsPDF for client-side export to PDF (load libraries first) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="portfolio.js?v=20250925.3"></script>
    <script>
    // After portfolio.js constructed the global app, adopt any preloaded JSON (if ?file= present) without breaking Drive logic.
    (function(){
        function tryAdopt() {
            if(window.app && typeof window.__ADOPT_PRELOADED === 'function'){
                console.log('[portfolio-loader] App ready, attempting adoption...');
                const success = window.__ADOPT_PRELOADED(window.app);
                if(success) {
                    console.log('[portfolio-loader] ✓ Data adoption successful');
                } else {
                    console.log('[portfolio-loader] ⚠ Data adoption failed or no data to adopt');
                }
            } else {
                console.log('[portfolio-loader] App or adoption function not ready yet, retrying...');
                setTimeout(tryAdopt, 100); // retry in 100ms
            }
        }
        
        // Try immediately, then retry if needed
        setTimeout(tryAdopt, 50);
    })();
    </script>
    <script>
        // Debug helper: list CSS/JS hrefs and explicitly report whether the expected files loaded
        (async function(){
            try{
                const cssLinks = Array.from(document.querySelectorAll('link[rel="stylesheet"]')).map(l=>l.href);
                const scriptSrcs = Array.from(document.querySelectorAll('script[src]')).map(s=>s.src);
                const stamp = document.getElementById('build-version');

                const portfolioCssHref = cssLinks.find(h=>h && h.includes('portfolio.css')) || null;
                const portfolioJsHref = scriptSrcs.find(s=>s && s.includes('portfolio.js')) || null;

                if (stamp) {
                    // Keep the visible stamp short and user-friendly; send full details to console
                    const cssStatus = portfolioCssHref ? 'OK' : 'MISSING';
                    const jsStatus = portfolioJsHref ? 'OK' : 'MISSING';
                    stamp.textContent = `${stamp.textContent} | CSS: ${cssStatus} | JS: ${jsStatus}`;
                }

                // Full debug details remain in console for developers
                console.debug('Debug: Loaded CSS links:', cssLinks);
                console.debug('Debug: Loaded script sources:', scriptSrcs);
                console.debug('Debug: portfolio.css presence (full href):', portfolioCssHref);
                console.debug('Debug: portfolio.js presence (full src):', portfolioJsHref);

                if (stamp) {
                  stamp.textContent += ' | mode: external-json-only';
                }

            } catch (e) {
                console.warn('debug helper failed', e);
            }
        })();
    </script>
<!-- Auth status UI for GIS -->
<div id="auth-status" style="position:fixed;top:10px;right:180px;z-index:9999;background:#fff;padding:6px;border:1px solid #ccc;border-radius:6px;display:none;font-size:13px;"></div>
<!-- Global Loading Bar (styles provided in portfolio.css) -->
<div id="global-loading-bar"><div class="glb-progress"></div></div>
<button id="authorize_button" style="display:block;position:fixed;top:10px;right:10px;z-index:9999;padding: 5px;">Sign in with Google</button>
<button id="signout_button" style="display:none;position:fixed;top:40px;right:10px;z-index:9999;">Sign out</button>
<button id="save-drive" onclick="app.saveToDrive()" style="display:none;position:fixed;top:70px;right:10px;z-index:9999;">Save to Drive</button>
<button id="load-drive" onclick="app.loadFromDrive()" style="display:none;position:fixed;top:100px;right:10px;z-index:9999;">Load from Drive</button>
<button id="export-json" onclick="app.exportPortfolioJson()" style="display:none;position:fixed;top:130px;right:10px;z-index:9999;">Export JSON</button>
<button id="import-json" onclick="document.getElementById('import-json-input').click()" style="display:none;position:fixed;top:160px;right:10px;z-index:9999;">Import JSON</button>
<input type="file" id="import-json-input" accept="application/json" style="display:none" />
<button id="drive-selftest" onclick="app.runDriveSelfTest()" style="display:none;position:fixed;top:190px;right:10px;z-index:9999;">Test Drive Sync</button>
<script>
// Google Identity Services (GIS) + gapi.client integration
const CLIENT_ID = (window.RMU_CONFIG && window.RMU_CONFIG.GOOGLE_CLIENT_ID) || window.GOOGLE_CLIENT_ID;
// Minimal scope: appDataFolder only (hidden per-user storage). Legacy migration handled manually via Import JSON.
const SCOPES = 'https://www.googleapis.com/auth/drive.appdata';

let tokenClient;
let accessToken = null;

function gisHandleResponse(resp) {
    console.log('GIS response', resp);
}

function initializeGisAndGapi() {
    // create the token client
    tokenClient = google.accounts.oauth2.initTokenClient({
        client_id: CLIENT_ID,
        scope: SCOPES,
        callback: async (tokenResponse) => {
            if (tokenResponse.error) {
                console.error('Token error', tokenResponse);
                return;
            }
            accessToken = tokenResponse.access_token;
            // Initialize gapi.client with the token
            gapi.client.setToken({access_token: accessToken});
            console.log('Access token set on gapi.client - User authenticated with appDataFolder scope');
            updateAuthUIStateGIS(true);
            
            // Automatically load user's portfolio data from their private appDataFolder
            try {
                if (window.app && typeof window.app.loadFromDrive === 'function') {
                    console.log('Auto-loading user portfolio from appDataFolder...');
                    await window.app.loadFromDrive();
                }
            } catch (e) {
                console.warn('Failed to auto-load portfolio on sign-in:', e);
            }
        }
    });

    // Attach button handlers
    document.getElementById('authorize_button').addEventListener('click', () => {
        if (!tokenClient) { console.error('tokenClient not ready'); return; }
        // Request an access token; this may open a popup
        tokenClient.requestAccessToken({prompt: 'consent'});
    });

    document.getElementById('signout_button').addEventListener('click', () => {
        if (accessToken) {
            // Revoke token
            fetch('https://oauth2.googleapis.com/revoke?token=' + accessToken, {method: 'POST', headers: {'Content-type': 'application/x-www-form-urlencoded'}})
            .then(() => {
                accessToken = null;
                gapi.client.setToken({});
                updateAuthUIStateGIS(false);
                console.log('Access token revoked');
            }).catch(e => { console.error('Revoke error', e); });
        }
    });

    // Also initialize gapi.client (discovery docs can be added when needed)
    gapi.load('client', async () => {
        try{
            await gapi.client.init({});
            console.log('gapi.client initialized');
        }catch(e){ console.error('gapi.client.init error', e); }
    });

    // Poll to update UI (in case token established by popup)
    const poll = setInterval(()=>{
        try{
            const token = gapi.client.getToken && gapi.client.getToken();
            if (token && token.access_token) {
                accessToken = token.access_token;
                updateAuthUIStateGIS(true);
                clearInterval(poll);
            }
        }catch(e){}
    }, 700);
}

function updateAuthUIStateGIS(signedIn) {
    const statusDiv = document.getElementById('auth-status');
    const authBtn = document.getElementById('authorize_button');
    const signOutBtn = document.getElementById('signout_button');
    const saveBtn = document.getElementById('save-drive');
    const loadBtn = document.getElementById('load-drive');
    const exportBtn = document.getElementById('export-json');
    const importBtn = document.getElementById('import-json');
    const importInput = document.getElementById('import-json-input');
    const selftestBtn = document.getElementById('drive-selftest');
    if (signedIn) {
        if (statusDiv) { statusDiv.innerText = 'Signed in (Drive access granted)'; statusDiv.style.display = 'block'; }
        if (authBtn) { authBtn.style.display = 'none'; }
        if (signOutBtn) { signOutBtn.style.display = 'inline-block'; }
        if (saveBtn) { saveBtn.style.setProperty('display','inline-block','important'); }
        if (loadBtn) { loadBtn.style.setProperty('display','inline-block','important'); }
        if (exportBtn) { exportBtn.style.setProperty('display','inline-block','important'); }
        if (importBtn) { importBtn.style.setProperty('display','inline-block','important'); }
        if (selftestBtn) { selftestBtn.style.setProperty('display','inline-block','important'); }
        if (importInput && !importInput._bound) {
            importInput.addEventListener('change', (e)=>{
                const file = e.target.files && e.target.files[0];
                if (file && window.app && typeof window.app.handleImportJsonFile === 'function') {
                    window.app.handleImportJsonFile(file);
                    e.target.value = '';
                }
            });
            importInput._bound = true;
        }
        console.log('Auth UI updated: signedIn true - save/load buttons shown (forced)');
    } else {
        if (statusDiv) { statusDiv.style.display = 'none'; }
        if (authBtn) { authBtn.style.display = 'block'; }
        if (signOutBtn) { signOutBtn.style.display = 'none'; }
        if (saveBtn) { saveBtn.style.setProperty('display','none','important'); }
        if (loadBtn) { loadBtn.style.setProperty('display','none','important'); }
        if (exportBtn) { exportBtn.style.setProperty('display','none','important'); }
        if (importBtn) { importBtn.style.setProperty('display','none','important'); }
        if (selftestBtn) { selftestBtn.style.setProperty('display','none','important'); }
        console.log('Auth UI updated: signedIn false - save/load buttons hidden (forced)');
    }
}

// If redirected from index.html with ?user=1 and a sessionStorage token, use it to auth and auto-load from Drive.
async function bootstrapTokenFromSessionThenLoad() {
    try {
        const params = new URLSearchParams(location.search);
        const isUser = params.get('user');
        if (isUser !== '1') return; // not a redirected student session
        let tok = null, email = null;
        try { tok = sessionStorage.getItem('userToken'); email = sessionStorage.getItem('userEmail'); } catch(_) {}
        if (!tok) return; // nothing to bootstrap

        // Ensure gapi.client is ready, then set the token and auto-load
        await new Promise((resolve) => {
            if (window.gapi && gapi.load) {
                gapi.load('client', async () => {
                    try { await gapi.client.init({}); } catch(_) {}
                    resolve();
                });
            } else {
                // Fallback small poll until gapi arrives (up to ~5s)
                const started = Date.now();
                const timer = setInterval(() => {
                    if (window.gapi && gapi.load) {
                        clearInterval(timer);
                        gapi.load('client', async () => {
                            try { await gapi.client.init({}); } catch(_) {}
                            resolve();
                        });
                    } else if (Date.now() - started > 5000) {
                        clearInterval(timer); resolve();
                    }
                }, 150);
            }
        });

        try {
            if (window.gapi && gapi.client && typeof gapi.client.setToken === 'function') {
                gapi.client.setToken({ access_token: tok });
                accessToken = tok; // keep local var consistent
                updateAuthUIStateGIS(true);
                console.log('[portfolio] Using sessionStorage token for Drive (user redirect). Email:', email||'(unknown)');
                // Auto-load from private appDataFolder
                if (window.app && typeof window.app.loadFromDrive === 'function') {
                    await window.app.loadFromDrive();
                }
            }
        } catch (e) {
            console.warn('bootstrapTokenFromSessionThenLoad failed', e);
        }
    } catch (e) {
        // Non-fatal
    }
}

// Initialize when GIS script is ready
window.addEventListener('load', () => {
    console.log('window.load: waiting for GIS and gapi');
    const check = setInterval(()=>{
        if (window.google && google.accounts && window.gapi) {
            console.log('GIS and gapi detected, initializing');
            clearInterval(check);
            initializeGisAndGapi();
            // If redirected with a token in sessionStorage, bootstrap immediately
            bootstrapTokenFromSessionThenLoad();
        }
    }, 300);
});
</script>
</body>
</html>